일관성(consistency), 가용성(availability), 파티션 감내(partition tolerance) 세 가지 요구사항을 동시에 만족하는 분산 시스템을 설계하는 것은 불가능하다는 정리다. 세 가지 요구사항 중 두 가지를 충족하기 위해서는 반드시 하나를 포기해야 한다는 의미이다.
### 데이터 일관성
분산 시스템에 접속하는 모든 클라이언트는 어떤 노드에 접속했느냐에 관계없이 언제나 같은 데이터를 제공해야 한다.

### 가용성
분산 시스템에 접속하는 클라이언트는 일부 노드에 장애가 발생하더라도 항상 응답을 받을 수 있어야 한다.

### 파티션 감내(혹은 분할 내성)
파티션은 두 노드 사이에 통신 장애가 발생하였음을 의미한다. 파티션 감내는 네트워크에 파티션이 생기더라도 시스템은 계속 동작하여야 한다는 것을 의미한다.

세 가지 요구사항 중 어느 두 가지를 만족하는 것을 다음과 같이 분류할 수 있다.
### CP 시스템
- **일관성**과 파티션 감내를 지원
- 가용성을 희생
- 네트워크 문제가 발생할 시 새로운 데이터를 반영할 수 있는 상황이 오기 전까지 서버는 오류를 응답할 것이다.

### AP 시스템
- **가용성**과 파티션 감내를 지원
- 일관성을 희생
- 네트워크 문제가 발생하여 서버 사이의 데이터에 일관성이 깨지고 과거의 데이터를 반환한다 하더라도 서버는 반드시 응답을 반환한다.

### CA 시스템
- 일관성과 가용성을 지원
- 파티션 감내를 희생
- 그러나 일반적인 상황에서 **네트워크 장애는 피할 수 없는 일**이므로 **분산 시스템은 반드시 파티션 감내를 고려하여 설계**해야 한다.
- 그러므로 실세계에 CA 시스템은 존재할 수 없다.

따라서 일관성과 가용성 중 어떤 것을 더 우선해야 하는지 파악하고 적절하게 선택해야 한다.

## 참고
---
https://www.ibm.com/kr-ko/topics/cap-theorem
가상 면접 사례로 배우는 대규모 시스템 설계 기초 6장