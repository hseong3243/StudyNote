깃 서브모듈은 jwt의 secret이나 데이터베이스 계정과 같이 application.yml에 기록할 수 없는 민감 정보를 관리하기 위한 방법 중 하나입니다.

방법은 간단합니다.
### 프라이빗 저장소 생성
- application.yml을 저장할 private repository를 생성하고 해당 저장소에 push 합니다.
### 프로젝트 저장소에 서브모듈 등록
- 서브모듈을 등록할 리포지토리에서 다음과 같은 git 명령어를 사용합니다.
```
git submodule add https://github.com/org-이름/서브모듈-저장소-이름
```
- 다음으로 프로젝트 저장소의 루트에 `.gitmodules`를 추가해줍니다.
- `.gitmodules`를 이용하여 프로젝트 저장소와 서브 모듈 저장소 간에 관계를 맺어주는 설정을 추가해주어야 합니다.
```
[submodule "project/서브모듈-저장소-이름"]
		path = project/서브모듈-저장소-이름
		url = https://github.com/org-이름/서브모듈-저장소-이름
		branch = develop
```
### application.yml이 업데이트 되었을 경우
서브모듈 저장소에서 수정한 application.yml을 프로젝트 저장소에서 업데이트를 시켜주는 작업이 필요합니다. 다음 git 명령어를 입력하여 최신화할 수 있습니다.
```
git submodule update --remote
```

### build 시 서브모듈 설정 정보 가져오기
---
##### build.gradle
```
processResources.dependsOn('copySecret')

tasks.register('copySecret', copy) {
	form './서브모듈-디렉터리-경로'
	include "application*.yml"
	into 'src/main/resources'
}
```

## Github Action에 서브모듈 등록하기
---
이제 배포시에 application.yml이 적용될 수 있도록 CD 워크플로우에 다음과 같은 내용을 추가해줍니다.
```
- name: Checkout
	uses: actions/checkout@v1
	with:
		token: ${{secretes.ACTION_TOKEN}}
		submodules: true
```